<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>‡πÄ‡∏Å‡∏°‡∏û‡∏¢‡∏±‡∏ç‡∏ä‡∏ô‡∏∞‡πÑ‡∏ó‡∏¢</title>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=TH+Sarabun+New:wght@400;700&display=swap" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="loading-screen">
        <div class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏°...</div>
        <div id="progress-bar-container"><div id="progress-bar"></div></div>
        <div id="progress-text">0%</div>
    </div>
    
    <div id="topBar">
        <div id="profileSection">
            <div id="profileIconContainer"><img id="profileIconImg" src="" alt="Profile"></div>
            <div id="finalRewardsContainer"></div>
        </div>
        <div id="progressSection"></div>
        <div id="statusSection">
            <div id="roundCoinContainer"></div>
            <div id="scoreDisplay">üí∞ <span id="scoreValue">0</span></div>
            <div id="livesDisplay"></div>
            <div id="timerContainer"><div id="timerFill"></div></div>
        </div>
    </div>

    <div id="sidebar-overlay"></div>
    <div id="sidebar">
        <span id="sidebarCloseBtn">&times;</span>
        <img id="sidebarProfileImg" src="" alt="Profile">
        <h2 id="sidebarUserName"></h2>
        <p id="sidebarUserEmail"></p>
        <button id="sidebarLogoutBtn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>

    <div id="main-wrapper">
        <div id="authContainer">
             <div class="login-content">
                    <div class="login-form">
                            <ul class="nav nav-tabs nav-fill mb-4" id="authTab" role="tablist">
                                    <li class="nav-item" role="presentation"><button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login-pane" type="button" role="tab">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button></li>
                                    <li class="nav-item" role="presentation"><button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register-pane" type="button" role="tab">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button></li>
                            </ul>
                            <div class="tab-content" id="authTabContent">
                                    <div class="tab-pane fade show active" id="login-pane" role="tabpanel">
                                        <form onsubmit="event.preventDefault(); login();">
                                            <div class="mb-3"><input type="email" class="form-control form-control-lg" id="login-email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•" required></div>
                                            <div class="mb-4"><input type="password" class="form-control form-control-lg" id="login-password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" required></div>
                                            <div class="d-grid gap-2"><button type="submit" class="btn btn-primary action-btn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button></div>
                                            <div class="text-center my-3 text-muted">&mdash; ‡∏´‡∏£‡∏∑‡∏≠ &mdash;</div>
                                            <button type="button" onclick="loginWithGoogle()" class="btn google-btn action-btn"><img src="https://img.icons8.com/color/48/000000/google-logo.png" alt="Google icon" class="google-icon" /> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google</button>
                                        </form>
                                    </div>
                                    <div class="tab-pane fade" id="register-pane" role="tabpanel">
                                        <form onsubmit="event.preventDefault(); register();">
                                            <div class="mb-3"><input type="text" class="form-control form-control-lg" id="register-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" required></div>
                                            <div class="mb-3"><input type="email" class="form-control form-control-lg" id="register-email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•" required></div>
                                            <div class="mb-3"><input type="password" class="form-control form-control-lg" id="register-password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" required></div>
                                            <div class="mb-4"><input type="password" class="form-control form-control-lg" id="register-confirm-password" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" required></div>
                                            <div class="d-grid"><button type="submit" class="btn btn-primary action-btn">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button></div>
                                        </form>
                                    </div>
                            </div>
                    </div>
             </div>
        </div>
        
        <div id="gameArea">
            <div class="title-container">
                <h1 class="main-title">‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏û‡∏¢‡∏±‡∏ç‡∏ä‡∏ô‡∏∞</h1>
                <div class="controls">
                    <button id="lessonBtn" onclick="showLessonPage()">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                    <button id="startBtn" onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
                    <button id="restartBtn" onclick="restartGame()" style="display:none;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
                </div>
            </div>
            <div id="game"></div>
        </div>

        <div id="level2Area">
            <div class="title-container">
                <h1 id="level2-title" class="main-title">‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏û‡∏¢‡∏±‡∏ç‡∏ä‡∏ô‡∏∞</h1>
            </div>
            <div id="target-sequence-container"></div>
            <div id="source-consonants-container"></div>
        </div>

        <div id="popup">
            <div id="popupBox">
                <div id="popupText"></div>
                <div id="popupControls" class="popup-controls">
                    <button id="popupBtn">‡∏ï‡∏Å‡∏•‡∏á</button>
                </div>
            </div>
        </div>
    </div>

    <div id="lesson-page">
        <button id="close-lesson-btn">&times; ‡∏õ‡∏¥‡∏î</button>
        <h2>‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¢‡∏±‡∏ç‡∏ä‡∏ô‡∏∞‡πÑ‡∏ó‡∏¢</h2>
        <div id="lesson-grid"></div>
    </div>

    <canvas id="confetti-canvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1001; pointer-events: none;"></canvas>
    
    <audio id="hoverSound" src="https://phairater.github.io/thai-sounds/hover.mp3"></audio>
    <audio id="clickSound" src="https://phairater.github.io/thai-sounds/click.mp3"></audio>
    <audio id="wrongSound" src="https://phairater.github.io/thai-sounds/wrong.mp3"></audio>
    <audio id="gameoverSound" src="https://phairater.github.io/thai-sounds/game-over.mp3"></audio>
    <audio id="winSound" src="https://phairater.github.io/thai-sounds/winning.mp3"></audio>
    <audio id="coinSound" src="https://phairater.github.io/thai-sounds/coin.mp3"></audio>
    <audio id="levelUpSound" src="https://phairater.github.io/thai-sounds/level-up.mp3"></audio>
    <audio id="coinSwooshSound" src="https://phairater.github.io/thai-sounds/swoosh.mp3"></audio>
    <audio id="loseLifeSound" src="https://phairater.github.io/thai-sounds/error.mp3"></audio>
    <audio id="roundEndCoinSound" src="https://phairater.github.io/thai-sounds/coin-upaif.mp3"></audio>
    <audio id="goodResultSound" src="https://phairater.github.io/thai-sounds/goodresult.mp3"></audio>
    <audio id="diamondSound" src="https://phairater.github.io/thai-sounds/gem-level-up.mp3"></audio>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    
    <script src="./script.js"></script>
</body>
</html>
